# AstrBot æœåŠ¡å™¨çŠ¶æ€æ’ä»¶ v3.0

![Version](https://img.shields.io/badge/version-v3.0-blue) ![Python](https://img.shields.io/badge/python-3.9+-blue.svg) ![License](https://img.shields.io/badge/license-MIT-lightgrey) ![AstrBot](https://img.shields.io/badge/AstrBot-â‰¥1.0.0-green)

> **é¡¹ç›®åœ°å€:** [**github.com/riceshowerX/astrbot_plugin_status**](https://github.com/riceshowerX/astrbot_plugin_status)

ä¸€ä¸ªä¸º [AstrBot](https://github.com/AstrBotDevs/AstrBot) æ‰“é€ çš„æœåŠ¡å™¨çŠ¶æ€ç›‘æ§æ’ä»¶ï¼Œæä¾›å…¨é¢çš„ç³»ç»ŸæŒ‡æ ‡ç›‘æ§å’Œæ™ºèƒ½ç®¡ç†åŠŸèƒ½ã€‚

## ğŸš€ v3.0 æ–°ç‰¹æ€§

### æ¶æ„å‡çº§
- **æ¨¡å—åŒ–è®¾è®¡** - æ ¸å¿ƒåŠŸèƒ½åˆ†ç¦»ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ç±»å‹æ³¨è§£å’Œé™æ€ç±»å‹æ£€æŸ¥
- **å¼‚æ­¥ä¼˜åŒ–** - å…¨å¼‚æ­¥æ¶æ„ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹

### åŠŸèƒ½å¢å¼º
- **å¤šæ ¼å¼è¾“å‡º** - æ”¯æŒ Markdownã€çº¯æ–‡æœ¬ã€JSON ä¸‰ç§è¾“å‡ºæ ¼å¼
- **æ™ºèƒ½ç¼“å­˜** - å¯é…ç½®çš„ç¼“å­˜ç­–ç•¥ï¼Œæ”¯æŒå¼ºåˆ¶åˆ·æ–°
- **æ‰©å±•ç›‘æ§** - æ–°å¢è¿›ç¨‹ç»Ÿè®¡ã€ç½‘ç»œè¯¦æƒ…ã€ç³»ç»Ÿè´Ÿè½½ç­‰æŒ‡æ ‡
- **å®¹å™¨ä¼˜åŒ–** - æ›´å¥½çš„å®¹å™¨ç¯å¢ƒæ£€æµ‹å’Œæ”¯æŒ

### æ€§èƒ½ä¼˜åŒ–
- **çº¿ç¨‹æ± ç®¡ç†** - å¯é…ç½®çš„çº¿ç¨‹æ± å¤§å°ï¼Œé¿å…èµ„æºç«äº‰
- **è¶…æ—¶æ§åˆ¶** - ç²¾ç¡®çš„è¶…æ—¶ç®¡ç†ï¼Œé˜²æ­¢é‡‡é›†å¡æ­»
- **å†…å­˜ä¼˜åŒ–** - æ™ºèƒ½çš„å†…å­˜ä½¿ç”¨å’Œç¼“å­˜æ¸…ç†

### å®‰å…¨åŠ å›º
- **è¾“å…¥éªŒè¯** - ä¸¥æ ¼çš„é…ç½®éªŒè¯å’Œè·¯å¾„å®‰å…¨æ£€æŸ¥
- **éšç§ä¿æŠ¤** - å¢å¼ºçš„éšç§æ¨¡å¼ï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯
- **é”™è¯¯å¤„ç†** - ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œè¯¦ç»†çš„æ—¥å¿—è®°å½•

## ğŸ“¦ å®‰è£…

### é€šè¿‡é“¾æ¥å®‰è£… (æ¨è)
1. å¤åˆ¶æ’ä»¶ä»“åº“é“¾æ¥: `https://github.com/riceshowerX/astrbot_plugin_status`
2. åœ¨ AstrBot WebUI çš„ **æ’ä»¶ç®¡ç† â†’ ä»é“¾æ¥å®‰è£…** ä¸­ç²˜è´´å¹¶å®‰è£…

### é€šè¿‡æ–‡ä»¶å®‰è£…
1. åœ¨ [Releases](https://github.com/riceshowerX/astrbot_plugin_status/releases) é¡µé¢ä¸‹è½½æœ€æ–°çš„ `.zip` å‹ç¼©åŒ…
2. åœ¨ AstrBot WebUI çš„ **æ’ä»¶ç®¡ç† â†’ ä»æ–‡ä»¶å®‰è£…** ä¸­ä¸Šä¼ å¹¶å®‰è£…

## âš™ï¸ é…ç½®è¯´æ˜

### åŸºæœ¬é…ç½®
| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `privacy_level` | string | `full` | éšç§çº§åˆ«: `full`(å®Œæ•´) æˆ– `minimal`(æœ€å°) |
| `cache_duration` | int | `10` | ç¼“å­˜æ—¶é—´(ç§’)ï¼Œ0è¡¨ç¤ºç¦ç”¨ç¼“å­˜ |
| `collect_timeout` | int | `25` | é‡‡é›†è¶…æ—¶æ—¶é—´(ç§’) |
| `output_format` | string | `markdown` | è¾“å‡ºæ ¼å¼: `markdown`, `plain`, `json` |
| `show_temp` | bool | `true` | æ˜¯å¦æ˜¾ç¤ºCPUæ¸©åº¦ |

### ç£ç›˜ç›‘æ§
| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `disk_paths` | list | `[]` | è¦ç›‘æ§çš„ç£ç›˜è·¯å¾„åˆ—è¡¨ |
| `auto_discover_disks` | bool | `true` | æ˜¯å¦è‡ªåŠ¨å‘ç°ç£ç›˜ |
| `max_disk_count` | int | `10` | æœ€å¤§ç›‘æ§ç£ç›˜æ•°é‡ |

### é«˜çº§é…ç½®
| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `enable_network_stats` | bool | `true` | å¯ç”¨ç½‘ç»œç»Ÿè®¡ |
| `enable_process_stats` | bool | `true` | å¯ç”¨è¿›ç¨‹ç»Ÿè®¡ |
| `enable_system_info` | bool | `true` | å¯ç”¨ç³»ç»Ÿä¿¡æ¯ |
| `enable_detailed_errors` | bool | `true` | æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ |
| `max_thread_workers` | int | `3` | æœ€å¤§å·¥ä½œçº¿ç¨‹æ•° |
| `collection_interval` | int | `30` | é‡‡é›†é—´éš”(ç§’) |

### é…ç½®ç¤ºä¾‹

```json
{
  "privacy_level": "minimal",
  "cache_duration": 15,
  "collect_timeout": 30,
  "output_format": "markdown",
  "show_temp": true,
  "disk_paths": [
    "/data",
    {"path": "/var/log", "display": "æ—¥å¿—å­˜å‚¨"},
    {"path": "/home", "display": "ç”¨æˆ·æ•°æ®"}
  ],
  "auto_discover_disks": false,
  "max_disk_count": 5
}
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬å‘½ä»¤
- `/status` - è·å–æœåŠ¡å™¨çŠ¶æ€
- `çŠ¶æ€` / `zt` / `s` / `sysinfo` - å‘½ä»¤åˆ«å

### é«˜çº§ç”¨æ³•
- `/status åˆ·æ–°` - å¼ºåˆ¶é‡æ–°é‡‡é›†æ•°æ®
- `/status_help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `/status_stats` - æ˜¾ç¤ºæ’ä»¶ç»Ÿè®¡ä¿¡æ¯

### è¾“å‡ºç¤ºä¾‹

**Markdown æ ¼å¼:**
```markdown
# ğŸ–¥ï¸ æœåŠ¡å™¨å®æ—¶çŠ¶æ€

â±ï¸ ç³»ç»Ÿè¿è¡Œæ—¶é—´: 3å¤© 2å°æ—¶ 15åˆ†é’Ÿ

ğŸ–¥ï¸ CPU
   - ä½¿ç”¨ç‡: 25.4%
   - æ¸©åº¦: 45.2Â°C
   - é¢‘ç‡: 3200MHz
   - æ ¸å¿ƒ: 8æ ¸
   - è´Ÿè½½: 1.25, 1.10, 0.95

ğŸ’¾ å†…å­˜
   - ä½¿ç”¨ç‡: 62.3%
   - å·²ä½¿ç”¨: 8.2GB/16.0GB

ğŸ’¿ ç£ç›˜
   - /data: 45.2% (225GB/500GB)
   - æ—¥å¿—å­˜å‚¨: 12.1% (12GB/100GB)

ğŸŒ ç½‘ç»œ
   - æ€»ä¸Šä¼ : 2.1GB
   - æ€»ä¸‹è½½: 5.4GB

ğŸ“Š è¿›ç¨‹
   - æ€»æ•°: 183 | è¿è¡Œ: 12 | ç¡çœ : 158

ğŸ“… æ•°æ®æ›´æ–°æ—¶é—´: 2024-01-15 14:30:25
```

**JSON æ ¼å¼:**
```json
{
  "system_info": {
    "uptime": "3å¤© 2å°æ—¶ 15åˆ†é’Ÿ",
    "boot_time": "2024-01-12T12:15:30",
    "is_containerized": false,
    "platform": {
      "system": "Linux",
      "release": "5.15.0-91-generic",
      "version": "#101-Ubuntu SMP Tue Nov 14 13:30:08 UTC 2023",
      "machine": "x86_64"
    }
  },
  "cpu_info": {
    "percent": 25.4,
    "temperature": 45.2,
    "frequency": 3200,
    "cores": 8,
    "load_avg": [1.25, 1.10, 0.95]
  },
  "memory_info": {
    "total": 17179869184,
    "used": 10737418240,
    "free": 6442450944,
    "percent": 62.3,
    "swap_total": 2147483648,
    "swap_used": 536870912,
    "swap_percent": 25.0
  }
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
astrbot_plugin_status/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ collector.py   # æ•°æ®é‡‡é›†å™¨
â”‚   â”‚   â”œâ”€â”€ formatter.py  # æ ¼å¼åŒ–å™¨
â”‚   â”‚   â”œâ”€â”€ config.py     # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ cache.py      # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ plugin.py          # ä¸»æ’ä»¶æ¨¡å—
â”œâ”€â”€ main.py               # å…¥å£æ–‡ä»¶
â”œâ”€â”€ _conf_schema.json     # é…ç½®æ¶æ„
â”œâ”€â”€ metadata.yaml         # æ’ä»¶å…ƒæ•°æ®
â”œâ”€â”€ requirements.txt      # ä¾èµ–é¡¹
â””â”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
```

### æ‰©å±•å¼€å‘
è¦æ·»åŠ æ–°çš„ç›‘æ§æŒ‡æ ‡:

1. åœ¨ `collector.py` ä¸­æ·»åŠ æ•°æ®é‡‡é›†æ–¹æ³•
2. åœ¨ `formatter.py` ä¸­æ·»åŠ æ ¼å¼åŒ–é€»è¾‘
3. æ›´æ–°é…ç½®éªŒè¯å’Œé»˜è®¤å€¼

### æµ‹è¯•å»ºè®®
```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install pytest pytest-asyncio

# è¿è¡Œæµ‹è¯•
pytest tests/ -v
```

## ğŸ”’ å®‰å…¨å»ºè®®

### ç”Ÿäº§ç¯å¢ƒé…ç½®
1. **å›ºå®šä¾èµ–ç‰ˆæœ¬**: ä½¿ç”¨ `pip freeze > requirements.txt`
2. **é™åˆ¶è®¿é—®æƒé™**: ç¡®ä¿statuså‘½ä»¤æœ‰ä¸¥æ ¼çš„ACLæ§åˆ¶
3. **å¯ç”¨éšç§æ¨¡å¼**: åœ¨å…¬å…±ç¾¤ç»„ä½¿ç”¨ `privacy_level: minimal`
4. **ç›‘æ§èµ„æºä½¿ç”¨**: å®šæœŸæ£€æŸ¥æ’ä»¶æ€§èƒ½å’Œèµ„æºæ¶ˆè€—

### å®‰å…¨é…ç½®ç¤ºä¾‹
```json
{
  "privacy_level": "minimal",
  "cache_duration": 30,
  "disk_paths": [
    {"path": "/app/data", "display": "åº”ç”¨æ•°æ®"},
    {"path": "/app/logs", "display": "æ—¥å¿—æ–‡ä»¶"}
  ],
  "auto_discover_disks": false,
  "enable_detailed_errors": false
}
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### èµ„æºæ¶ˆè€—
- **å†…å­˜ä½¿ç”¨**: ~10-50MB (å–å†³äºç›‘æ§æŒ‡æ ‡æ•°é‡)
- **CPUå ç”¨**: <1% (é‡‡é›†æœŸé—´çŸ­æš‚å³°å€¼)
- **ç½‘ç»œæµé‡**: å¯å¿½ç•¥ä¸è®¡

### é‡‡é›†æ—¶é—´
- **é¦–æ¬¡é‡‡é›†**: 1-3ç§’
- **ç¼“å­˜å‘½ä¸­**: <100ms
- **è¶…æ—¶è®¾ç½®**: å»ºè®®25-30ç§’

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feature/new-feature`
3. æäº¤æ›´æ”¹: `git commit -am 'Add new feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/new-feature`
5. åˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ
- éµå¾ª PEP 8 ä»£ç é£æ ¼
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

- ğŸ“– [è¯¦ç»†æ–‡æ¡£](https://github.com/riceshowerX/astrbot_plugin_status/wiki)
- ğŸ› [æäº¤Issue](https://github.com/riceshowerX/astrbot_plugin_status/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/riceshowerX/astrbot_plugin_status/discussions)

---

**æ¸©é¦¨æç¤º**: åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼Œè¯·åŠ¡å¿…æµ‹è¯•æ‰€æœ‰åŠŸèƒ½å¹¶é…ç½®é€‚å½“çš„å®‰å…¨ç­–ç•¥ã€‚